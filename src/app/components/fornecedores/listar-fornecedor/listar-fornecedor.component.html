<div class="container py-4">
    <div class="row justify-content-center">
    <div class="col-12 col-lg-10 col-xxl-8 list-page">
            <h1 class="titulo-lista text-center">Fornecedores cadastrados</h1>

            <div class="filtro-lista">
                <label for="filtro" class="form-label fw-semibold">Pesquisar</label>
                <input
                    type="text"
                    class="form-control"
                    id="filtro"
                    [formControl]="filtro"
                    placeholder="Digite nome, CNPJ ou telefone"
                />
            </div>

            <div *ngIf="carregando" class="lista-feedback lista-feedback--info">Carregando fornecedores...</div>

            <ng-container *ngIf="!carregando">
                <table
                    class="table text-center align-middle tabela-ordenavel"
                    *ngIf="fornecedoresFiltrados.length > 0; else nenhumFornecedor"
                >
                    <thead>
                        <tr>
                            <th scope="col" class="col-1"></th>
                            <th scope="col">#</th>
                            <th scope="col">Nome</th>
                            <th scope="col">CNPJ</th>
                            <th scope="col">Telefone</th>
                            <th scope="col">Ações</th>
                        </tr>
                    </thead>
                    <tbody cdkDropList [cdkDropListData]="fornecedoresFiltrados" (cdkDropListDropped)="aoReordenar($event)">
                        <tr *ngFor="let fornecedor of fornecedoresFiltrados; let i = index; trackBy: trackById" cdkDrag>
                            <td cdkDragHandle title="Arraste para reordenar">
                                <i class="bi bi-list icone-arrastar"></i>
                            </td>
                            <th scope="row">{{ fornecedor.ordem || i + 1 }}</th>
                            <td class="fw-semibold">{{ fornecedor.nome }}</td>
                            <td>{{ fornecedor.cnpj }}</td>
                            <td>{{ fornecedor.fone }}</td>
                            <td>
                                <i class="bi bi-pen edit-icon" (click)="editFornecedor(fornecedor.id!)" title="Editar"></i>
                                <i class="bi bi-trash mx-2" (click)="deleteFornecedor(fornecedor.id!)" title="Remover"></i>
                                <i class="bi bi-eye" (click)="viewProdutosFornecedor(fornecedor.id!)" title="Ver produtos"></i>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <ng-template #nenhumFornecedor>
                    <div class="lista-feedback">
                        Nenhum fornecedor cadastrado.
                    </div>
                </ng-template>
            </ng-container>
        </div>
    </div>
</div>