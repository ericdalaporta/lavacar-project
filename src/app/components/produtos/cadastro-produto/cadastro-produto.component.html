<section class="cadastro-page cadastro-page--compact">
    <div class="card cadastro-card">
        <h1 class="cadastro-titulo">Cadastrar Produto</h1>
        <form [formGroup]="formProduto" (ngSubmit)="salvarProduto()" class="cadastro-form">
            <div>
                <label for="nome" class="form-label">Nome do Produto</label>
                <input
                    type="text"
                    class="form-control"
                    id="nome"
                    formControlName="nome"
                    placeholder="Ex: Óleo Sintético 5W30"
                    required
                    [ngClass]="{'is-invalid': formProduto.controls.nome.invalid && (formProduto.controls.nome.touched || formProduto.controls.nome.dirty)}"
                />
                <div
                    *ngIf="formProduto.controls.nome.invalid && (formProduto.controls.nome.touched || formProduto.controls.nome.dirty)"
                    class="text-danger pequeno"
                >
                    <span *ngIf="formProduto.controls.nome.errors?.['required']">Nome é obrigatório.</span>
                </div>
            </div>

            <div>
                <label for="preco" class="form-label">Preço</label>
                <input
                    type="number"
                    class="form-control"
                    id="preco"
                    formControlName="preco"
                    placeholder="Ex: 150.00"
                    required
                    [ngClass]="{'is-invalid': formProduto.controls.preco.invalid && (formProduto.controls.preco.touched || formProduto.controls.preco.dirty)}"
                />
                <div
                    *ngIf="formProduto.controls.preco.invalid && (formProduto.controls.preco.touched || formProduto.controls.preco.dirty)"
                    class="text-danger pequeno"
                >
                    <span *ngIf="formProduto.controls.preco.errors?.['required']">Preço é obrigatório.</span>
                    <span *ngIf="formProduto.controls.preco.errors?.['min']">Preço deve ser maior ou igual a 0.</span>
                </div>
            </div>

            <div>
                <label for="quantidade" class="form-label">Quantidade</label>
                <input
                    type="number"
                    class="form-control"
                    id="quantidade"
                    formControlName="quantidade"
                    placeholder="Ex: 50"
                    required
                    [ngClass]="{'is-invalid': formProduto.controls.quantidade.invalid && (formProduto.controls.quantidade.touched || formProduto.controls.quantidade.dirty)}"
                />
                <div
                    *ngIf="formProduto.controls.quantidade.invalid && (formProduto.controls.quantidade.touched || formProduto.controls.quantidade.dirty)"
                    class="text-danger pequeno"
                >
                    <span *ngIf="formProduto.controls.quantidade.errors?.['required']">Quantidade é obrigatória.</span>
                    <span *ngIf="formProduto.controls.quantidade.errors?.['min']">Quantidade deve ser maior que 0.</span>
                </div>
            </div>

            <div>
                <label for="fornecedorId" class="form-label">Fornecedor</label>
                <select
                    class="form-select"
                    id="fornecedorId"
                    formControlName="fornecedorId"
                    required
                    [ngClass]="{'is-invalid': formProduto.controls.fornecedorId.invalid && (formProduto.controls.fornecedorId.touched || formProduto.controls.fornecedorId.dirty)}"
                >
                    <option value="" disabled selected>Selecione o fornecedor</option>
                    <option *ngFor="let fornecedor of fornecedores" [value]="fornecedor.id">
                        {{ fornecedor.nome }}
                    </option>
                </select>
                <div
                    *ngIf="formProduto.controls.fornecedorId.invalid && (formProduto.controls.fornecedorId.touched || formProduto.controls.fornecedorId.dirty)"
                    class="text-danger pequeno"
                >
                    <span *ngIf="formProduto.controls.fornecedorId.errors?.['required']">Fornecedor é obrigatório.</span>
                </div>
            </div>

            <div class="cadastro-actions">
                <button type="submit" class="btn btn-primary" [disabled]="formProduto.invalid">Salvar</button>
                <button type="reset" class="btn btn-outline-danger">Limpar</button>
            </div>
        </form>
    </div>
</section>